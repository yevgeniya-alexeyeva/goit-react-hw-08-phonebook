(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[5],{109:function(t,e,n){"use strict";n.r(e);var r,c,a,u,o,s,i,b,j=n(0),f=n.n(j),O=n(26),l=n.n(O),d=n(17),h=n(10),g=n(30),p=n(9),v=n(4),C=n(52),x=n.n(C),m=n(19),S=n(53),E=n.n(S),k=n(1),y=n(8),R=Object(v.c)([],(r={},Object(k.a)(r,y.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(k.a)(r,y.a.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(g.a)(t),[n])})),Object(k.a)(r,y.a.removeContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),q=Object(v.c)(!1,(c={},Object(k.a)(c,y.a.fetchContactsRequest,(function(){return!0})),Object(k.a)(c,y.a.fetchContactsSuccess,(function(){return!1})),Object(k.a)(c,y.a.fetchContactsError,(function(){return!1})),Object(k.a)(c,y.a.addContactRequest,(function(){return!0})),Object(k.a)(c,y.a.addContactSuccess,(function(){return!1})),Object(k.a)(c,y.a.addContactError,(function(){return!1})),Object(k.a)(c,y.a.removeContactRequest,(function(){return!0})),Object(k.a)(c,y.a.removeContactSuccess,(function(){return!1})),Object(k.a)(c,y.a.removeContactError,(function(){return!1})),c)),A=Object(v.c)(null,(a={},Object(k.a)(a,y.a.fetchContactsError,(function(t,e){return e.payload})),Object(k.a)(a,y.a.fetchContactsRequest,(function(){return null})),Object(k.a)(a,y.a.addContactError,(function(t,e){return e.payload})),Object(k.a)(a,y.a.addContactRequest,(function(){return null})),Object(k.a)(a,y.a.removeContactError,(function(t,e){return e.payload})),Object(k.a)(a,y.a.removeContactRequest,(function(){return null})),a)),U=Object(p.b)({userContacts:R,loading:q,error:A}),w=Object(v.c)("",Object(k.a)({},y.a.changeFilter,(function(t,e){return e.payload}))),L=Object(p.b)({items:U,filter:w}),T=n(3),z={name:"",email:""},N=Object(v.c)(z,(u={},Object(k.a)(u,T.a.registerSuccess,(function(t,e){return e.payload.user})),Object(k.a)(u,T.a.loginSuccess,(function(t,e){return e.payload.user})),Object(k.a)(u,T.a.logoutSuccess,(function(){return z})),Object(k.a)(u,T.a.getCurrentUserSuccess,(function(t,e){return e.payload})),u)),_=Object(v.c)("",(o={},Object(k.a)(o,T.a.registerSuccess,(function(t,e){return e.payload.token})),Object(k.a)(o,T.a.loginSuccess,(function(t,e){return e.payload.token})),Object(k.a)(o,T.a.logoutSuccess,(function(){return null})),o)),D=Object(v.c)("",(s={},Object(k.a)(s,T.a.registerError,(function(t,e){return e.payload})),Object(k.a)(s,T.a.loginError,(function(t,e){return e.payload})),Object(k.a)(s,T.a.logoutError,(function(t,e){return e.payload})),Object(k.a)(s,T.a.getCurrentUserError,(function(t,e){return e.payload})),s)),F=Object(v.c)(!1,(i={},Object(k.a)(i,T.a.registerSuccess,(function(){return!0})),Object(k.a)(i,T.a.loginSuccess,(function(){return!0})),Object(k.a)(i,T.a.getCurrentUserSuccess,(function(){return!0})),Object(k.a)(i,T.a.registerError,(function(){return!1})),Object(k.a)(i,T.a.loginError,(function(){return!1})),Object(k.a)(i,T.a.getCurrentUserError,(function(){return!1})),Object(k.a)(i,T.a.logoutSuccess,(function(){return!1})),i)),M=Object(v.c)(!1,(b={},Object(k.a)(b,T.a.registerRequest,(function(){return!0})),Object(k.a)(b,T.a.registerSuccess,(function(){return!1})),Object(k.a)(b,T.a.registerError,(function(){return!1})),Object(k.a)(b,T.a.loginRequest,(function(){return!0})),Object(k.a)(b,T.a.loginSuccess,(function(){return!1})),Object(k.a)(b,T.a.loginError,(function(){return!1})),Object(k.a)(b,T.a.logoutRequest,(function(){return!0})),Object(k.a)(b,T.a.logoutSuccess,(function(){return!1})),Object(k.a)(b,T.a.logoutError,(function(){return!1})),Object(k.a)(b,T.a.getCurrentUserRequest,(function(){return!0})),Object(k.a)(b,T.a.getCurrentUserSuccess,(function(){return!1})),Object(k.a)(b,T.a.getCurrentUserError,(function(){return!1})),b)),P=Object(p.b)({user:N,token:_,error:D,isAuthenticated:F,loading:M}),B={key:"auth",storage:E.a,whitelist:["token"]},J=Object(p.b)({auth:Object(m.g)(B,P),contacts:L}),I=[].concat(Object(g.a)(Object(v.d)({serializableCheck:{ignoredActions:[m.a,m.f,m.b,m.c,m.d,m.e]}})),[x.a]),Q=Object(v.a)({reducer:J,middleware:I,devTools:!1}),G=Object(m.h)(Q),H=n(54),K=(n(66),n(37)),V=n(38),W=n(40),X=n(39),Y=(n(67),n(7)),Z=n(25),$=n.n(Z),tt=function(t){return t.auth.user.email},et=function(t){return t.auth.isAuthenticated},nt=function(t){return t.auth.loading},rt=n(2),ct=Object(h.b)((function(t){return{isAuthenticated:et(t)}}))((function(t){var e=t.isAuthenticated;return Object(rt.jsxs)("nav",{children:[Object(rt.jsx)(d.b,{to:"/",exact:!0,className:$.a.navLink,activeClassName:$.a.navLinkActive,children:"Main"}),e&&Object(rt.jsx)(d.b,{to:"/contacts",exact:!0,className:$.a.navLink,activeClassName:$.a.navLinkActive,children:"Contacts"})]})})),at=function(){return Object(rt.jsxs)("div",{children:[Object(rt.jsx)(d.b,{to:"/register",children:"Sign Up"}),Object(rt.jsx)(d.b,{to:"/login",children:"Login"})]})},ut=n(28),ot=Object(h.b)((function(t){return{userEmail:tt(t)}}),(function(t){return{onLogout:function(){return t(Object(ut.c)())}}}))((function(t){var e=t.userEmail,n=t.onLogout;return Object(rt.jsxs)("div",{children:[Object(rt.jsx)("p",{children:"".concat(e)}),Object(rt.jsx)("button",{type:"button",onClick:n,children:"Logout"})]})})),st=Object(h.b)((function(t){return{isAuthenticated:et(t)}}))((function(t){var e=t.isAuthenticated;return Object(rt.jsxs)("header",{children:[Object(rt.jsx)(ct,{}),e?Object(rt.jsx)(ot,{}):Object(rt.jsx)(at,{})]})})),it=n(20),bt=n(31),jt=Object(h.b)((function(t){return{isAuthenticated:et(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(bt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(rt.jsx)(Y.b,Object(it.a)(Object(it.a)({},c),{},{render:function(t){return n?Object(rt.jsx)(e,Object(it.a)({},t)):Object(rt.jsx)(Y.a,{to:r})}}))})),ft=Object(h.b)((function(t){return{isAuthenticated:et(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(bt.a)(t,["component","isAuthenticated","redirectTo"]);return Object(rt.jsx)(Y.b,Object(it.a)(Object(it.a)({},c),{},{render:function(t){return n&&c.restricted?Object(rt.jsx)(Y.a,{to:r}):Object(rt.jsx)(e,Object(it.a)({},t))}}))})),Ot=n(29),lt=n.n(Ot),dt=Object(j.lazy)((function(){return n.e(2).then(n.bind(null,207))})),ht=Object(j.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,208))})),gt=Object(j.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,209))})),pt=Object(j.lazy)((function(){return n.e(1).then(n.bind(null,205))})),vt=function(t){Object(W.a)(n,t);var e=Object(X.a)(n);function n(){return Object(K.a)(this,n),e.apply(this,arguments)}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.props.onUserRefresh()}},{key:"render",value:function(){var t=this.props.isLoading;return Object(rt.jsxs)("div",{className:"App",children:[Object(rt.jsx)(st,{}),Object(rt.jsx)(j.Suspense,{fallback:Object(rt.jsx)(lt.a,{type:"ThreeDots",color:"#fc4445",height:100,width:100,timeout:3e3}),children:Object(rt.jsxs)(Y.d,{children:[Object(rt.jsx)(Y.b,{path:"/",exact:!0,component:dt}),t?Object(rt.jsx)(lt.a,{type:"ThreeDots",color:"#fc4445",height:100,width:100,timeout:3e3}):Object(rt.jsx)(ft,{path:"/register",restricted:!0,redirectTo:"/",exact:!0,component:ht}),t?Object(rt.jsx)(lt.a,{type:"ThreeDots",color:"#fc4445",height:100,width:100,timeout:3e3}):Object(rt.jsx)(ft,{path:"/login",restricted:!0,redirectTo:"/",component:gt}),Object(rt.jsx)(jt,{path:"/contacts",redirectTo:"/login",exact:!0,component:pt})]})})]})}}]),n}(j.Component),Ct={onUserRefresh:ut.a},xt=Object(h.b)((function(t){return{isLoading:nt(t)}}),Ct)(vt);l.a.render(Object(rt.jsx)(f.a.StrictMode,{children:Object(rt.jsx)(h.a,{store:Q,children:Object(rt.jsx)(H.a,{loading:null,persistor:G,children:Object(rt.jsx)(d.a,{children:Object(rt.jsx)(xt,{})})})})}),document.getElementById("root"))},24:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return b})),n.d(e,"e",(function(){return j}));var r=n(15),c=n.n(r);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var a=function(){return c.a.get("/contacts").then((function(t){return t.data}))},u=function(t){return c.a.post("/contacts",t).then((function(t){return t.data}))},o=function(t){return c.a.delete("/contacts/".concat(t))},s=function(t){return c.a.post("/users/signup",t).then((function(t){return t.data}))},i=function(t){return c.a.post("/users/login",t).then((function(t){return t.data}))},b=function(){return c.a.post("/users/logout")},j=function(){return c.a.get("/users/current").then((function(t){return t.data}))}},25:function(t,e,n){t.exports={navLink:"Navigation_navLink__3CdUQ",navLinkActive:"Navigation_navLinkActive__2hdPA"}},28:function(t,e,n){"use strict";n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(18),c=n.n(r),a=n(23),u=n(3),o=n(24),s=n(15),i=n.n(s),b=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){i.a.defaults.headers.common.Authorization=""},f=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.registerRequest()),e.prev=1,e.next=4,Object(o.b)(t);case 4:r=e.sent,b(r.token),n(u.a.registerSuccess(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.registerError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.loginRequest()),e.prev=1,e.next=4,Object(o.f)(t);case 4:r=e.sent,b(r.token),n(u.a.loginSuccess(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(u.a.loginError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.a.logoutRequest()),t.prev=1,t.next=4,Object(o.g)();case 4:j(),e(u.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(u.a.logoutError(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return b(a),e(u.a.getCurrentUserRequest()),t.prev=5,t.next=8,Object(o.e)();case 8:s=t.sent,e(u.a.getCurrentUserSuccess(s)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(u.a.getCurrentUserError(t.t0));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),c={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),loginRequest:Object(r.b)("auth/loginRequest"),loginSuccess:Object(r.b)("auth/loginSuccess"),loginError:Object(r.b)("auth/loginError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")}},66:function(t,e,n){},67:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),c={changeFilter:Object(r.b)("changeFilter"),fetchContactsRequest:Object(r.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(r.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(r.b)("contacts/fetchContactsError"),addContactRequest:Object(r.b)("contacts/addContactRequest"),addContactSuccess:Object(r.b)("contacts/addContactSuccess"),addContactError:Object(r.b)("contacts/addContactError"),removeContactRequest:Object(r.b)("contacts/removeContactRequest"),removeContactSuccess:Object(r.b)("contacts/removeContactSuccess"),removeContactError:Object(r.b)("contacts/removeContactError")}}},[[109,6,7]]]);
//# sourceMappingURL=main.6b05b0be.chunk.js.map